---
import ToggleTheme from "../helpers/ToggleTheme.astro";
import ToggleLanguage from "../helpers/ToggleLanguage.astro";
import XIcon from "../icons/XIcon.astro";
import MenuIcon from "../icons/MenuIcon.astro";
import NavbarData from "../utils/NavbarData.astro";

const {
  NAV_ELEMENT_1,
  NAV_ELEMENT_2,
  NAV_ELEMENT_3,
  NAV_ELEMENT_4,
  NAV_ELEMENT_5,
} = Astro.props;
---

<div class="lg:flex justify-center items-center pb-4 lg:pb-0 lg:pt-6 lg:mt-6">
  <nav
    class="flex justify-between items-center py-4 fixed z-50 backdrop-blur-md
    px-4 w-full max-w-[1050px] lg:rounded-xl lg:py-5 dark:bg-[#0B1120]/70 bg-[#C8B6F8]/40"
  >
    <a href="#inicio">
      <img
        class="size-8 rounded-full cursor-pointer lg:size-6 hidden dark:block"
        src="/imagenes/General/LogoAS-dark.webp"
        alt="Logo"
      />

      <img
        class="size-8 rounded-full cursor-pointer lg:size-6 dark:hidden"
        src="/imagenes/General/LogoAS.webp"
        alt="Logo"
        title="Logo"
      />
    </a>

    <div class="text-grayStrong dark:text-gray lg:hidden">
      <MenuIcon
        id="menuIcon"
        class="size-8 cursor-pointer transition duration-700 delay-200"
      />
      <XIcon
        id="closeMenuIcon"
        class="size-8 absolute top-3 right-4 scale-0 z-[9999] transition duration-700 delay-0"
      />
    </div>

    <ul
      id="menuMobile"
      class="h-screen w-screen text-grayStrong dark:text-gray px-4 transition duration-700
      scale-0 flex flex-col items-start justify-center gap-y-8 gap-x-12
      dark:bg-gradient-to-r dark:from-secondary/95 dark:to-third bg-gradient-to-r from-white/95 to-fourth
      max-[1024px]:fixed max-[1024px]:text-4xl max-[1024px]:left-0 max-[1024px]:top-0
      lg:h-auto lg:w-auto lg:flex-row lg:px-0 lg:scale-100 lg:bg-none lg:dark:bg-none"
    >
      <NavbarData
        NAV_ELEMENT_1={NAV_ELEMENT_1}
        NAV_ELEMENT_2={NAV_ELEMENT_2}
        NAV_ELEMENT_3={NAV_ELEMENT_3}
        NAV_ELEMENT_4={NAV_ELEMENT_4}
        NAV_ELEMENT_5={NAV_ELEMENT_5}
      />
    </ul>

    <aside
      id="toggles"
      class="absolute max-[1024px]:top-4 transition duration-700 gap-x-4 scale-0
      max-[1024px]:bottom-0 max-[1024px]:right-16
      lg:relative flex lg:justify-center lg:items-center lg:scale-100"
    >
      <ToggleTheme />
      <ToggleLanguage />
    </aside>
  </nav>
</div>

<script>
  const menuIcon = document.getElementById("menuIcon");
  const closeMenuIcon = document.getElementById("closeMenuIcon");
  const menuMobile = document.getElementById("menuMobile");
  const toggles = document.getElementById("toggles");
  const menuItems = document.querySelectorAll("li");

  const toggleItems = () => {
    menuMobile?.classList.toggle("scale-0");
    menuIcon?.classList.toggle("scale-0");
    menuIcon?.classList.toggle("delay-0");
    menuIcon?.classList.toggle("delay-200");
    closeMenuIcon?.classList.toggle("scale-0");
    closeMenuIcon?.classList.toggle("delay-0");
    closeMenuIcon?.classList.toggle("delay-200");
    toggles?.classList.toggle("scale-0");
    toggles?.classList.toggle("delay-0");
    toggles?.classList.toggle("delay-200");
  };

  menuIcon?.addEventListener("click", () => {
    toggleItems();
  });

  closeMenuIcon?.addEventListener("click", () => {
    toggleItems();
  });

  menuItems.forEach((menuItem) => {
    menuItem.addEventListener("click", () => {
      toggleItems();
    });
  });
</script>
